"use strict";$(function(){function e(e,t){return e+": "+t+"<br>"}function t(e){switch(e){case 0:return"Thumb";break;case 1:return"Index";break;case 2:return"Middle";break;case 3:return"Ring";break;case 4:return"Pinky"}}function n(e,t){return e+": "+t[0]+", "+t[1]+", "+t[2]+"<br>"}function a(){w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}function r(){var e=Math.round(5e3*Math.random())-2501;return 0==e?r():e}function i(){M=new THREE.Scene,w=new THREE.PerspectiveCamera(45,x/L,.1,5e4),c=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),c.setSize(x,L),c.setClearColor(2236962),document.getElementById("three").appendChild(c.domElement);var e=new THREE.HemisphereLight(16777215,16777215,.6);e.color.setHSL(.6,1,.6),e.groundColor.setHSL(.095,1,.75),e.position.set(0,30,0),M.add(e);for(var t="./images/skybox/purplenebula_",n=["right","left","top","top","back","front"],a=".jpg",i=new THREE.BoxGeometry(1e4,1e4,1e4),o=[],s=0;6>s;s++)o.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(t+n[s]+a),side:THREE.DoubleSide}));var d=new THREE.MeshFaceMaterial(o),h=new THREE.Mesh(i,d);M.add(h);for(var l="./images/bumps/",s=0;50>s;s++){var m=new THREE.SphereGeometry(Math.floor(28*Math.random()+3),30,30),p=new THREE.MeshPhongMaterial({bumpMap:new THREE.ImageUtils.loadTexture(l+Math.floor(10*Math.random())+".jpg")});y[s]=new THREE.Mesh(m,p),p.bumpMap.minFilter=THREE.LinearFilter,y[s].position.set(r(),r(),r()),y[s].material.color.setRGB(Math.random(),Math.random(),Math.random()),M.add(y[s])}}function o(e){if(requestAnimationFrame(o),b+=.05,void 0!==m&&m.grabStrength<.5){var t=m.yaw(),n=m.pitch();m.palmPosition[2]>200?w.translateZ(I):m.palmPosition[2]<100&&m.palmPosition[2]>0?w.translateZ(-I):m.palmPosition[2]<0&&w.translateZ(3*-I),m.palmPosition[1]>250?w.translateY(I):m.palmPosition[1]<150&&w.translateY(-I),-.08>t&&(w.rotation.y+=90*Math.PI/5e4),t>.08&&(w.rotation.y-=90*Math.PI/5e4),-.4>n&&(w.rotation.x-=90*Math.PI/1e5),n>.4&&(w.rotation.x+=90*Math.PI/1e5)}c.render(M,w)}var s=document.getElementById("output"),d="",h="",l="",m,p,u="",E={enableGestures:!0};Leap.loop(E,function(t){d=e("frame_id",t.id),d+="<br>";for(var n=0;n<t.hands.length;n++)m=t.hands[n],h=e("hand_type",m.type),h+=e("hand posish",m.palmPosition),h+="<br>",d+=h;s.innerHTML=d});var c,w,M,H,b=0,g,T,f,R,P,v,y=[],I=2,x=window.innerWidth,L=window.innerHeight;window.addEventListener("resize",a,!1),i(),o()});