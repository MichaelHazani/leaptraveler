"use strict";$(function(){function e(e,t){return e+": "+t+"<br>"}function t(e){switch(e){case 0:return"Thumb";break;case 1:return"Index";break;case 2:return"Middle";break;case 3:return"Ring";break;case 4:return"Pinky"}}function n(e,t){return e+": "+t[0]+", "+t[1]+", "+t[2]+"<br>"}function o(){w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}function a(){var e=Math.round(5e3*Math.random())-2501;return 0==e?a():e}function r(){g=new THREE.Scene,w=new THREE.PerspectiveCamera(45,x/k,.1,5e4),u=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),u.setSize(x,k),u.setClearColor(2236962),document.getElementById("three").appendChild(u.domElement);var e=new THREE.HemisphereLight(16777215,16777215,.6);e.color.setHSL(.6,1,.6),e.groundColor.setHSL(.095,1,.75),e.position.set(0,30,0),g.add(e);for(var t="./images/skybox/purplenebula_",n=["right","left","top","top","back","front"],o=".jpg",r=new THREE.BoxGeometry(1e4,1e4,1e4),i=[],s=0;6>s;s++)i.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(t+n[s]+o),side:THREE.DoubleSide}));var d=new THREE.MeshFaceMaterial(i),l=new THREE.Mesh(r,d);g.add(l);for(var s=0;400>s;s++){var E=new THREE.SphereGeometry(Math.floor(28*Math.random()+3),30,30),c=new THREE.MeshPhongMaterial({});S[s]=new THREE.Mesh(E,c),S[s].position.set(a(),a(),a()),S[s].material.color.setRGB(Math.random(),Math.random(),Math.random()),g.add(S[s])}y=new SPE.Group({texture:THREE.ImageUtils.loadTexture("./images/smoke.png"),maxAge:2,blending:THREE.AdditiveBlending}),M=new SPE.Emitter({position:new THREE.Vector3(0,100,50),positionSpread:new THREE.Vector3(1e3,2e3,1e3),acceleration:new THREE.Vector3(.1,.1,.1),colorStart:new THREE.Color("blue"),colorEnd:new THREE.Color("white"),sizeStart:2,sizeEnd:2,opacityStart:1,opacityMiddle:1,opacityEnd:0,particleCount:1e5,maxAge:2}),y.addEmitter(M),g.add(y.mesh)}function i(e){if(requestAnimationFrame(i),T+=.05,void 0!==c&&c.grabStrength<.5){var t=c.yaw(),n=c.pitch();console.log("yaw: "+t),console.log("pitch: "+n),console.log("grab: "+c.grabStrength),console.log("palmpos: "+c.palmPosition),c.palmPosition[2]>200?w.translateZ(v):c.palmPosition[2]<100&&c.palmPosition[2]>0?w.translateZ(-v):c.palmPosition[2]<0&&w.translateZ(3*-v),c.palmPosition[1]>250?w.translateY(v):c.palmPosition[1]<150&&w.translateY(-v),-.08>t&&(w.rotation.y+=90*Math.PI/5e4),t>.08&&(w.rotation.y-=90*Math.PI/5e4),-.4>n&&(w.rotation.x-=90*Math.PI/1e5),n>.4&&(w.rotation.x+=90*Math.PI/1e5)}y.tick(e/1e5),M.position.x=1,u.render(g,w)}var s=document.getElementById("output"),d="",l="",E="",c,h,p="",m={enableGestures:!0};Leap.loop(m,function(t){d=e("frame_id",t.id),d+="<br>";for(var n=0;n<t.hands.length;n++)c=t.hands[n],l=e("hand_type",c.type),l+=e("hand posish",c.palmPosition),l+="<br>",d+=l;s.innerHTML=d});var u,w,g,H,T=0,M,R,b,P,f,y,S=[],v=2,x=window.innerWidth,k=window.innerHeight;window.addEventListener("resize",o,!1),r(),i()});