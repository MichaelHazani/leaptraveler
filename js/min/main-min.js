"use strict";$(function(){function e(e,t){return e+": "+t+"<br>"}function t(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight)}function a(){var e=Math.round(5e3*Math.random())-2501;return 0===e?a():e}function n(){E=new THREE.Scene,E.fog=new THREE.FogExp2(14010344,1e-4),l=new THREE.PerspectiveCamera(45,H/c,.1,5e4),h=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),h.setSize(H,c),h.setClearColor(2236962),document.getElementById("three").appendChild(h.domElement);var e=new THREE.HemisphereLight(16777215,16777215,.6);e.color.setHSL(.6,1,.6),e.groundColor.setHSL(.095,1,.75),e.position.set(0,30,0),E.add(e);for(var t="./images/skybox/purplenebula_",n=["right","left","top","top","back","front"],o=".jpg",i=new THREE.BoxGeometry(1e4,1e4,1e4),r=[],d=0;6>d;d++)r.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(t+n[d]+o),side:THREE.DoubleSide}));var s=new THREE.MeshFaceMaterial(r),p=new THREE.Mesh(i,s);E.add(p),E.add(w[0]),E.add(w[1]),E.add(w[2]);for(var m="./images/bumps/",u=0;100>u;u++){var R=new THREE.SphereGeometry(Math.floor(88*Math.random()+3),30,30),T=new THREE.MeshPhongMaterial({bumpMap:new THREE.ImageUtils.loadTexture(m+Math.floor(10*Math.random())+".jpg")});M[u]=new THREE.Mesh(R,T),T.bumpMap.minFilter=THREE.LinearFilter,T.opacity=.5,M[u].position.set(a(),a(),a()),M[u].material.color.setRGB(Math.random(),Math.random(),Math.random()),w[Math.floor(2*Math.random())].add(M[u])}}function o(e){if(requestAnimationFrame(o),void 0!==d&&d.grabStrength<.5){var t=d.yaw(),a=d.pitch();d.palmPosition[2]>200?l.translateZ(u):d.palmPosition[2]<100&&d.palmPosition[2]>0?l.translateZ(-u):d.palmPosition[2]<0&&l.translateZ(3*-u),d.palmPosition[1]>250?l.translateY(u):d.palmPosition[1]<150&&l.translateY(-u),-.08>t?l.rotation.y+=90*Math.PI/5e4:t>.08&&(l.rotation.y-=90*Math.PI/5e4),-.4>a?l.rotation.x-=90*Math.PI/1e5:a>.4&&(l.rotation.x+=90*Math.PI/1e5)}w[0].rotation.y+=2e-4,w[0].rotation.x+=1e-4,w[1].rotation.y-=4e-4,w[1].rotation.x+=1e-4,w[2].rotation.y-=4e-4,w[2].rotation.x-=2e-4,h.render(E,l)}var i="",r="",d,s={enableGestures:!0};Leap.loop(s,function(t){i=e("frame_id",t.id),i+="<br>";for(var a=0;a<t.hands.length;a++)d=t.hands[a],r=e("hand_type",d.type),r+=e("hand posish",d.palmPosition),r+="<br>",i+=r});var h,l,E,p,m,w={0:new THREE.Object3D,1:new THREE.Object3D,2:new THREE.Object3D},M=[],u=2,H=window.innerWidth,c=window.innerHeight;window.addEventListener("resize",t,!1),n(),o()});